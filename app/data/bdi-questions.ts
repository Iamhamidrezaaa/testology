import { Question } from '@/types/test'
import { normalizeQuestions } from '@/lib/helpers/question-helper'

// فقط فیلدهای خام هر سؤال
type RawQuestion = Pick<Question, 'text' | 'options'>


const rawQuestions: RawQuestion[] = [
  {
    text: "احساس غم و ناراحتی",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "احساس ناامیدی",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات", 
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "احساس شکست",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "عدم رضایت از زندگی",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "احساس گناه",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "احساس تنبیه شدن",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "نفرت از خود",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "سرزنش خود",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "افکار خودکشی",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "گریه کردن",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "تحریک‌پذیری",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "کاهش علاقه به دیگران",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "مشکل در تصمیم‌گیری",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "احساس زشتی",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "مشکل در کار",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "مشکل در خواب",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "خستگی",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "کاهش اشتها",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "کاهش وزن",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "نگرانی در مورد سلامتی",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  },
  {
    text: "کاهش علاقه جنسی",
    options: [
      "هیچ‌وقت",
      "گاهی اوقات",
      "اغلب اوقات",
      "همیشه"
    ]
  }
]



// خروجی نهایی با فیلدهای اجباری تکمیل می‌شود
export const bdiQuestions: Question[] = normalizeQuestions(rawQuestions, {
  testId: 'bdi',
  type: 'SINGLE_CHOICE',
  required: true
})

export const bdiOptions = [
  { label: "هیچ‌وقت", value: "0" },
  { label: "گاهی اوقات", value: "1" },
  { label: "اغلب اوقات", value: "2" },
  { label: "همیشه", value: "3" }
]

export const getBdiInterpretation = (score: number): string => {
  if (score <= 10) {
    return "نتیجه شما نشان‌دهنده افسردگی خفیف است. ممکن است احساس غم و ناراحتی داشته باشید، اما این احساسات قابل کنترل هستند."
  } else if (score <= 16) {
    return "نتیجه شما نشان‌دهنده افسردگی متوسط است. ممکن است در عملکرد روزانه خود مشکل داشته باشید و نیاز به کمک حرفه‌ای داشته باشید."
  } else if (score <= 23) {
    return "نتیجه شما نشان‌دهنده افسردگی شدید است. توصیه می‌شود که حتماً با یک متخصص سلامت روان مشورت کنید."
  } else {
    return "نتیجه شما نشان‌دهنده افسردگی بسیار شدید است. لطفاً فوراً با یک متخصص سلامت روان یا پزشک مشورت کنید."
  }
}

export const calculateBdiScore = (answers: string[]): number => {
  return answers.reduce((total, answer) => total + parseInt(answer), 0)
}

export default bdiQuestions


