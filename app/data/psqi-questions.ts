import { Question } from '@/types/test'
import { normalizeQuestions } from '@/lib/helpers/question-helper'

// فقط فیلدهای خام هر سؤال
type RawQuestion = Pick<Question, 'text' | 'options'>


const rawQuestions: RawQuestion[] = [
  {
    text: "در طول ماه گذشته، معمولاً چه ساعتی به رختخواب می‌رفتید؟",
    options: [
      "قبل از ساعت 10 شب",
      "بین 10-11 شب",
      "بین 11-12 شب",
      "بعد از ساعت 12 شب"
    ]
  },
  {
    text: "چقدر طول می‌کشید تا به خواب بروید؟",
    options: [
      "کمتر از 15 دقیقه",
      "بین 15-30 دقیقه",
      "بین 30-60 دقیقه",
      "بیش از 60 دقیقه"
    ]
  },
  {
    text: "در طول ماه گذشته، معمولاً چه ساعتی از خواب بیدار می‌شدید؟",
    options: [
      "قبل از ساعت 6 صبح",
      "بین 6-7 صبح",
      "بین 7-8 صبح",
      "بعد از ساعت 8 صبح"
    ]
  },
  {
    text: "چقدر از خواب شبانه خود راضی هستید؟",
    options: [
      "خیلی راضی",
      "راضی",
      "ناراضی",
      "خیلی ناراضی"
    ]
  },
  {
    text: "چقدر مشکل خواب دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در به خواب رفتن دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در حفظ خواب دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در بیدار شدن زود از خواب دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در نفس کشیدن یا سرفه کردن دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در سرفه کردن یا خروپف کردن دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در احساس سرما یا گرما دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در کابوس دیدن دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در درد داشتن دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در استفاده از داروهای خواب‌آور دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در خوابیدن در طول روز دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در حفظ انرژی در طول روز دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در حفظ تمرکز در طول روز دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  },
  {
    text: "چقدر مشکل در حفظ خلق و خوی خوب در طول روز دارید؟",
    options: [
      "هیچ مشکل",
      "مشکل خفیف",
      "مشکل متوسط",
      "مشکل شدید"
    ]
  }
]



// خروجی نهایی با فیلدهای اجباری تکمیل می‌شود
export const psqiQuestions: Question[] = normalizeQuestions(rawQuestions, {
  testId: 'psqi',
  type: 'SINGLE_CHOICE',
  required: true
})

export const psqiOptions = [
  { label: "هیچ مشکل", value: 0 },
  { label: "مشکل خفیف", value: 1 },
  { label: "مشکل متوسط", value: 2 },
  { label: "مشکل شدید", value: 3 }
]

export const getPsqiInterpretation = (score: number): string => {
  if (score <= 5) {
    return "کیفیت خواب خوب - شما کیفیت خواب خوبی دارید."
  } else if (score <= 10) {
    return "کیفیت خواب متوسط - شما کیفیت خواب متوسطی دارید که می‌تواند بهبود یابد."
  } else {
    return "کیفیت خواب ضعیف - شما کیفیت خواب ضعیفی دارید که نیاز به بهبود دارد."
  }
}

export const getPsqiSeverity = (score: number): 'خوب' | 'متوسط' | 'ضعیف' => {
  if (score <= 5) return 'خوب'
  if (score <= 10) return 'متوسط'
  return 'ضعیف'
}

export default psqiQuestions


















