import { Question } from '@/types/test'
import { normalizeQuestions } from '@/lib/helpers/question-helper'

// فقط فیلدهای خام هر سؤال
type RawQuestion = Pick<Question, 'text' | 'options'>

const rawQuestions: RawQuestion[] = [
  {
    text: "در دو هفته گذشته، چقدر احساس کرده‌اید که علاقه‌ای به کار یا فعالیت‌هایتان ندارید؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  },
  {
    text: "در دو هفته گذشته، چقدر احساس کرده‌اید که غمگین، افسرده یا ناامید هستید؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  },
  {
    text: "در دو هفته گذشته، چقدر مشکل خواب داشته‌اید (مشکل در به خواب رفتن، بیدار شدن زود یا خواب زیاد)؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  },
  {
    text: "در دو هفته گذشته، چقدر احساس کرده‌اید که خسته یا کم‌انرژی هستید؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  },
  {
    text: "در دو هفته گذشته، چقدر اشتهایتان کم یا زیاد شده است؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  },
  {
    text: "در دو هفته گذشته، چقدر احساس کرده‌اید که در مورد خودتان بد فکر می‌کنید یا احساس می‌کنید که شکست خورده‌اید؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  },
  {
    text: "در دو هفته گذشته، چقدر مشکل تمرکز داشته‌اید (مثل خواندن روزنامه یا تماشای تلویزیون)؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  },
  {
    text: "در دو هفته گذشته، چقدر آهسته صحبت کرده‌اید یا حرکت کرده‌اید که دیگران متوجه شده‌اند؟ یا برعکس، چقدر بی‌قرار یا ناآرام بوده‌اید که بیش از حد معمول حرکت کرده‌اید؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  },
  {
    text: "در دو هفته گذشته، چقدر فکر کرده‌اید که بهتر است بمیرید یا به خودتان آسیب برسانید؟",
    options: [
      "اصلاً",
      "چند روز",
      "بیش از نیمی از روزها",
      "تقریباً هر روز"
    ]
  }
]



// خروجی نهایی با فیلدهای اجباری تکمیل می‌شود
export const phq9Questions: Question[] = normalizeQuestions(rawQuestions, {
  testId: 'phq9',
  type: 'SINGLE_CHOICE',
  required: true
})

export const phq9Options = [
  { label: "اصلاً", value: 0 },
  { label: "چند روز", value: 1 },
  { label: "بیش از نیمی از روزها", value: 2 },
  { label: "تقریباً هر روز", value: 3 }
]

export const getPhq9Interpretation = (score: number): string => {
  if (score <= 4) {
    return "افسردگی خفیف - شما علائم خفیف افسردگی دارید که ممکن است بر عملکرد روزانه شما تأثیر بگذارد."
  } else if (score <= 9) {
    return "افسردگی متوسط - شما علائم متوسط افسردگی دارید که بر زندگی روزانه شما تأثیر می‌گذارد."
  } else if (score <= 14) {
    return "افسردگی متوسط تا شدید - شما علائم متوسط تا شدید افسردگی دارید."
  } else if (score <= 19) {
    return "افسردگی شدید - شما علائم شدید افسردگی دارید که نیاز به مراجعه فوری به متخصص دارد."
  } else {
    return "افسردگی بسیار شدید - شما علائم بسیار شدید افسردگی دارید که نیاز به مراجعه فوری به متخصص دارد."
  }
}

export const getPhq9Severity = (score: number): 'خفیف' | 'متوسط' | 'متوسط تا شدید' | 'شدید' | 'بسیار شدید' => {
  if (score <= 4) return 'خفیف'
  if (score <= 9) return 'متوسط'
  if (score <= 14) return 'متوسط تا شدید'
  if (score <= 19) return 'شدید'
  return 'بسیار شدید'
}

export default phq9Questions


















