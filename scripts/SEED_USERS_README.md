# ุฑุงูููุง ุณุงุฎุช ฺฉุงุฑุจุฑุงู ุชุณุช (Admin ู User)

ุงู ุฑุงูููุง ุดุงูู ุฏู ุฑูุด ุจุฑุง ุณุงุฎุช ฺฉุงุฑุจุฑุงู ุชุณุช ุงุณุช:
- **ุฑูุด A**: ุฎูุฏฺฉุงุฑ ุจุง ุงุณฺฉุฑูพุช Node.js (ุชูุตู ูโุดูุฏ)
- **ุฑูุด B**: ุฏุณุช ุจุง Prisma Studio ุง SQL

---

## ุฑูุด A: ุฎูุฏฺฉุงุฑ (ุจุง ุงุณฺฉุฑูพุช)

### ูพุดโูุงุฒูุง
- Node.js ู npm ูุตุจ ุดุฏู ุจุงุดูุฏ
- Prisma Client ุชููุฏ ุดุฏู ุจุงุดุฏ (`npx prisma generate`)
- ุฏุชุงุจุณ ุฏุฑ ุฏุณุชุฑุณ ุจุงุดุฏ

### ุงุฌุฑุง

#### ุฑู ูุงุดู ููฺฉุงู (ููุฏูุฒ/Mac/Linux):
```bash
# 1. ุชููุฏ Prisma Client (ุงฺฏุฑ ูุจูุงู ุงูุฌุงู ูุดุฏู)
npx prisma generate

# 2. ุงุฌุฑุง ุงุณฺฉุฑูพุช
node scripts/seed-users.js
```

#### ุฏุงุฎู ฺฉุงูุชูุฑ Docker:
```bash
# ุงฺฏุฑ ุณุฑูุณ ุงูพ ุดูุง ุฏุฑ docker-compose.yml ุจู ูุงู "app" ุงุณุช:
docker compose exec app sh -c "npx prisma generate"
docker compose exec app sh -c "node scripts/seed-users.js"
```

### ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ:
```
๐ ุดุฑูุน ุณุงุฎุช ฺฉุงุฑุจุฑุงู...

โ ฺฉุงุฑุจุฑ admin@testology.me (ADMIN) ุจุง ููููุช ุงุฌุงุฏ/ุจูโุฑูุฒุฑุณุงู ุดุฏ
โ ฺฉุงุฑุจุฑ user@testology.me (USER) ุจุง ููููุช ุงุฌุงุฏ/ุจูโุฑูุฒุฑุณุงู ุดุฏ

๐ ุณุงุฎุช ูุชุงุฌ ุชุณุช ูฺฉ ุจุฑุง ฺฉุงุฑุจุฑ...
โ 8 ูุชุฌู ุชุณุช ูฺฉ ุจุฑุง user@testology.me ุงุฌุงุฏ ุดุฏ

โจ ุชูุงู! ฺฉุงุฑุจุฑุงู ุขูุงุฏู ุงุณุชูุงุฏู ูุณุชูุฏ:
   ๐ค Admin: admin@testology.me / Admin@1234
   ๐ค User:  user@testology.me  / User@1234
```

### ุจุฑุฑุณ ฺฉุงุฑุจุฑุงู:
```bash
node scripts/verify-users.js
```

---

## ุฑูุด B: ุฏุณุช

### ฺฏุฒูู 1: Prisma Studio (ุฑุงุญุชโุชุฑู ุฑูุด)

```bash
# ุงุฌุฑุง Prisma Studio
npx prisma studio
```

ุณูพุณ:
1. ูุฑูุฑฺฏุฑ ุจุงุฒ ูโุดูุฏ (ูุนูููุงู http://localhost:5555)
2. ุฑู ูุฏู `User` ฺฉูฺฉ ฺฉู
3. ุฏฺฉูู "Add record" ุฑุง ุจุฒู
4. ููุฏูุง ุฑุง ูพุฑ ฺฉู:
   - **Admin:**
     - `email`: `admin@testology.me`
     - `name`: `Admin`
     - `password`: (ุจุงุฏ ูุด ุดุฏู ุจุงุดุฏ - ุงุฒ bcrypt ุงุณุชูุงุฏู ฺฉู)
     - `role`: `ADMIN`
     - `isActive`: `true`
   - **User:**
     - `email`: `user@testology.me`
     - `name`: `User Test`
     - `password`: (ุจุงุฏ ูุด ุดุฏู ุจุงุดุฏ)
     - `role`: `USER`
     - `isActive`: `true`

**ูฺฉุชู ููู**: ุจุฑุง ุฑูุฒ ุนุจูุฑุ ุจุงุฏ ุงุฒ ฺฉ ุงุจุฒุงุฑ ูุด ุงุณุชูุงุฏู ฺฉู. ูโุชูุงู ุงุฒ Node.js ุงุณุชูุงุฏู ฺฉู:
```bash
node -e "const bcrypt = require('bcryptjs'); bcrypt.hash('Admin@1234', 12).then(h => console.log(h))"
```

### ฺฏุฒูู 2: SQL ูุณุชูู (ุจุฑุง SQLite)

```bash
# ุจุงุฒ ฺฉุฑุฏู ุฏุชุงุจุณ SQLite
sqlite3 prisma/testology.db
```

ุณูพุณ ุฏุฑ SQLite:

```sql
-- ุจุฑุฑุณ ุณุงุฎุชุงุฑ ุฌุฏูู
.schema User

-- ุฏุฑุฌ Admin (ุฑูุฒ: Admin@1234 - ุจุงุฏ ูุด ุดุฏู ุจุงุดุฏ)
-- ุจุฑุง ูุด ฺฉุฑุฏูุ ุงุฒ Node.js ุงุณุชูุงุฏู ฺฉู:
-- node -e "const bcrypt = require('bcryptjs'); bcrypt.hash('Admin@1234', 12).then(h => console.log(h))"

INSERT INTO User (id, email, name, password, role, "isActive", "createdAt", "updatedAt")
VALUES (
  'clx1234567890',  -- ฺฉ ID ููุญุตุฑ ุจู ูุฑุฏ
  'admin@testology.me',
  'Admin',
  '$2a$12$...',  -- ูุด ุฑูุฒ ุนุจูุฑ (ุงุฒ ุฏุณุชูุฑ ุจุงูุง ุจฺฏุฑ)
  'ADMIN',
  1,
  datetime('now'),
  datetime('now')
);

-- ุฏุฑุฌ User (ุฑูุฒ: User@1234)
INSERT INTO User (id, email, name, password, role, "isActive", "createdAt", "updatedAt")
VALUES (
  'clx0987654321',  -- ฺฉ ID ููุญุตุฑ ุจู ูุฑุฏ
  'user@testology.me',
  'User Test',
  '$2a$12$...',  -- ูุด ุฑูุฒ ุนุจูุฑ
  'USER',
  1,
  datetime('now'),
  datetime('now')
);

-- ุจุฑุฑุณ
SELECT email, name, role FROM User WHERE email IN ('admin@testology.me', 'user@testology.me');
```

---

## ุงุทูุงุนุงุช ูุฑูุฏ

ูพุณ ุงุฒ ุณุงุฎุช ฺฉุงุฑุจุฑุงู (ุจุง ูุฑ ุฑูุด):

### ุงุฏูู:
- **ุงูู**: `admin@testology.me`
- **ุฑูุฒ ุนุจูุฑ**: `Admin@1234`
- **ููุด**: `ADMIN`

### ฺฉุงุฑุจุฑ ุนุงุฏ:
- **ุงูู**: `user@testology.me`
- **ุฑูุฒ ุนุจูุฑ**: `User@1234`
- **ููุด**: `USER`
- **ุฏุงุฏูโูุง ูฺฉ**: 8 ูุชุฌู ุชุณุช ุจุฑุง ููุงุด ุฏุฑ ุฏุงุดุจูุฑุฏ

---

## ุณุงุฎุช ูุชุงุฌ ุชุณุช ูฺฉ (ููุท ุจุฑุง user@testology.me)

ุงฺฏุฑ ูโุฎูุงู ูุชุงุฌ ุชุณุช ุจุดุชุฑ ุงุถุงูู ฺฉูุ ูโุชูุงู ุงุฒ Prisma Studio ุงุณุชูุงุฏู ฺฉู:

1. `npx prisma studio` ุฑุง ุงุฌุฑุง ฺฉู
2. ุฑู ูุฏู `TestResult` ฺฉูฺฉ ฺฉู
3. ุจุฑุง ูุฑ ูุชุฌู:
   - `userId`: ID ฺฉุงุฑุจุฑ user@testology.me
   - `testName`: ูุงู ุชุณุช (ูุซูุงู "ุชุณุช ุงุถุทุฑุงุจ")
   - `score`: ููุฑู (ุนุฏุฏ ุจู 0 ุชุง 100)
   - `result`: ูุชุฌู (ูุซูุงู "ุนุงู" ุง "ูุชูุณุท")
   - `analysis`: ุชุญูู ุชุณุช
   - `createdAt`: ุชุงุฑุฎ ุชุณุช

ุง ูโุชูุงู ุงุณฺฉุฑูพุช `seed-users.js` ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉู (ูุชุงุฌ ูุฏู ุญุฐู ูโุดููุฏ ู ุฌุฏุฏ ุณุงุฎุชู ูโุดููุฏ).

---

## ุนุจโุงุจ

### ุฎุทุง: "Cannot find module '@prisma/client'"
```bash
npm install @prisma/client
npx prisma generate
```

### ุฎุทุง: "Cannot find module 'bcryptjs'"
```bash
npm install bcryptjs
```

### ุฎุทุง: "Database connection failed"
- ุจุฑุฑุณ ฺฉู ฺฉู ุฏุชุงุจุณ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช
- ูุงู `.env` ุฑุง ฺฺฉ ฺฉู ู `DATABASE_URL` ุฑุง ุจุฑุฑุณ ฺฉู
- ุงฺฏุฑ ุงุฒ Docker ุงุณุชูุงุฏู ูโฺฉูุ ูุทูุฆู ุดู ฺฉู ฺฉุงูุชูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช

### ุฎุทุง: "Unique constraint failed"
- ฺฉุงุฑุจุฑ ูุจูุงู ูุฌูุฏ ุฏุงุฑุฏ (ุงู ุฎุทุง ูุณุชุ upsert ุจุงุฏ ุขู ุฑุง ุญู ฺฉูุฏ)
- ุงฺฏุฑ ุฎุทุง ูโุฏูุฏุ ููฺฉู ุงุณุช ูุดฺฉู ุฏุฑ ููุฏ `phone` ุจุงุดุฏ (ุงฺฏุฑ unique ุงุณุช)

---

## ูฺฉุงุช ููู

1. **ุฑูุฒูุง ุนุจูุฑ**: ุฏุฑ ุฏุชุงุจุณ ุจู ุตูุฑุช ูุด ุดุฏู ุฐุฎุฑู ูโุดููุฏ (ุจุง bcryptjsุ 12 rounds)
2. **Upsert**: ุงุณฺฉุฑูพุช ุงุฒ `upsert` ุงุณุชูุงุฏู ูโฺฉูุฏุ ูพุณ ุงฺฏุฑ ฺฉุงุฑุจุฑ ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ
3. **ูุชุงุฌ ุชุณุช**: ูุฑ ุจุงุฑ ฺฉู ุงุณฺฉุฑูพุช ุฑุง ุงุฌุฑุง ูโฺฉูุ ูุชุงุฌ ูุฏู ุญุฐู ูโุดููุฏ ู ุฌุฏุฏ ุณุงุฎุชู ูโุดููุฏ
4. **ุฏุชุงุจุณ**: ูพุฑูฺู ุงุฒ SQLite ุงุณุชูุงุฏู ูโฺฉูุฏ (`prisma/testology.db`)

